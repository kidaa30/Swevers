tinyMCEPopup.requireLangPack();var LinkDialog={preInit:function(){var e;(e=tinyMCEPopup.getParam("external_link_list_url"))&&document.write('<script language="javascript" type="text/javascript" src="'+tinyMCEPopup.editor.documentBaseURI.toAbsolute(e)+'"></script>')},init:function(){var t=document.forms[0],i=tinyMCEPopup.editor;document.getElementById("hrefbrowsercontainer").innerHTML=getBrowserHTML("hrefbrowser","href","file","theme_advanced_link"),isVisible("hrefbrowser")&&(document.getElementById("href").style.width="180px"),this.fillTargetList("target_list"),(e=i.dom.getParent(i.selection.getNode(),"A"))&&(t.href.value=i.dom.getAttrib(e,"href"),t.linktitle.value=i.dom.getAttrib(e,"title"),t.insert.value=i.getLang("update"),i.dom.getAttrib(e,"class").length>0&&(t.stylelist.value=i.dom.getAttrib(e,"class")),selectByValue(t,"target_list",i.dom.getAttrib(e,"target"))),$("select").uniform({selectAutoWidth:!1})},update:function(){var e=document.forms[0],t=tinyMCEPopup.editor,i,n,o=e.href.value.replace(/ /g,"%20");return tinyMCEPopup.restoreSelection(),i=t.dom.getParent(t.selection.getNode(),"A"),!e.href.value&&i?(n=t.selection.getBookmark(),t.dom.remove(i,1),t.selection.moveToBookmark(n),tinyMCEPopup.execCommand("mceEndUndoLevel"),void tinyMCEPopup.close()):(null==i?(t.getDoc().execCommand("unlink",!1,null),tinyMCEPopup.execCommand("mceInsertLink",!1,"#mce_temp_url#",{skip_undo:1}),tinymce.each(t.dom.select("a"),function(n){"#mce_temp_url#"==t.dom.getAttrib(n,"href")&&(i=n,t.dom.setAttribs(i,{href:o,title:e.linktitle.value,target:e.target_list?getSelectValue(e,"target_list"):null,"class":e.stylelist.value}))})):t.dom.setAttribs(i,{href:o,title:e.linktitle.value,target:e.target_list?getSelectValue(e,"target_list"):null,"class":e.stylelist.value}),(1!=i.childNodes.length||"IMG"!=i.firstChild.nodeName)&&(t.focus(),t.selection.select(i),t.selection.collapse(0),tinyMCEPopup.storeSelection()),tinyMCEPopup.execCommand("mceEndUndoLevel"),void tinyMCEPopup.close())},checkPrefix:function(e){e.value&&Validator.isEmail(e)&&!/^\s*mailto:/i.test(e.value)&&(e.value="mailto:"+e.value),/:\/\//i.test(e.value)||(e.value="http://"+e.value)},fillTargetList:function(e){var t=tinyMCEPopup.dom,i=t.get(e),n;i.options[i.options.length]=new Option(tinyMCEPopup.getLang("not_set"),""),i.options[i.options.length]=new Option(tinyMCEPopup.getLang("advanced_dlg.link_target_same"),"_self"),i.options[i.options.length]=new Option(tinyMCEPopup.getLang("advanced_dlg.link_target_blank"),"_blank"),(n=tinyMCEPopup.getParam("theme_advanced_link_targets"))&&tinymce.each(n.split(","),function(e){e=e.split("="),i.options[i.options.length]=new Option(e[0],e[1])})}};LinkDialog.preInit(),tinyMCEPopup.onInit.add(LinkDialog.init,LinkDialog);